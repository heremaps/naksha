<!DOCTYPE html>
<html>
<head>
  <!-- start webserver:
    python -m http.server 8000

    open: http://localhost:8000/browser_test.html
   -->
  <script type="text/javascript" src="./here-naksha-lib-psql/src/jvmMain/resources/common.js"></script>
  <script type="text/javascript" src=""></script>
  <script language="JavaScript">
    naksha.toUri["beautify"]='http://localhost:8000/here-naksha-lib-psql/src/jvmMain/resources/beautify.min.js';

    naksha.toUri["joda"]='http://localhost:8000/here-naksha-lib-psql/src/jvmMain/resources/js-joda.js';
    naksha.toUri["kotlin"]='http://localhost:8000/here-naksha-lib-psql/build/dist/js/productionLibrary/kotlin-kotlin-stdlib.mjs';
    naksha.toUri["kotlinx_date_time"]='http://localhost:8000/here-naksha-lib-psql/build/dist/js/productionLibrary/Kotlin-DateTime-library-kotlinx-datetime.mjs';
    naksha.toName["@js-joda/core"] = "joda";
    naksha.toName["./kotlin-kotlin-stdlib.mjs"] = "kotlin";
    naksha.toName["./Kotlin-DateTime-library-kotlinx-datetime.mjs"] = "kotlinx_date_time";

    naksha.toUri["naksha_base"]='http://localhost:8000/here-naksha-lib-psql/build/dist/js/productionLibrary/naksha_base.mjs';
    naksha.toUri["naksha_jbon"]='http://localhost:8000/here-naksha-lib-psql/build/dist/js/productionLibrary/naksha_jbon.mjs';
    naksha.toUri["naksha_auth"]='http://localhost:8000/here-naksha-lib-psql/build/dist/js/productionLibrary/naksha_auth.mjs';
    naksha.toUri["naksha_geo"]='http://localhost:8000/here-naksha-lib-psql/build/dist/js/productionLibrary/naksha_geo.mjs';
    naksha.toUri["naksha_model"]='http://localhost:8000/here-naksha-lib-psql/build/dist/js/productionLibrary/naksha_model.mjs';
    naksha.toUri["naksha_psql"]='http://localhost:8000/here-naksha-lib-psql/build/dist/js/productionLibrary/naksha_psql.mjs';
    naksha.toName["./naksha_base.mjs"] = "naksha_base";
    naksha.toName["./naksha_jbon.mjs"] = "naksha_jbon";
    naksha.toName["./naksha_auth.mjs"] = "naksha_auth";
    naksha.toName["./naksha_geo.mjs"] = "naksha_geo";
    naksha.toName["./naksha_model.mjs"] = "naksha_model";
    naksha.toName["./naksha_psql.mjs"] = "naksha_psql";

    let beautify = require("beautify");
    let base = require("naksha_base");
    let jbon = require("naksha_jbon");
    let auth = require("naksha_auth");
    let geo = require("naksha_geo");
    let model = require("naksha_model");
    let psql = require("naksha_psql");

    const { js_beautify } = require("beautify");
    const { Platform, PlatformUtil } = require("naksha_base");
    const { PgUtil } = require("naksha_psql");
    const { JbEncoder, JbDecoder, JbFeatureDecoder } = require("naksha_jbon");

    function encodeTags(json) {
      if (!json) json = '{"name":"foo","age":48}'
      let raw = json;
      if (typeof raw === "string") raw = Platform.fromJSON(json);
      let klass = Platform.klassFor(base.AnyObject)
      let map = Platform.proxy(raw, klass)
      let enc = new JbEncoder();
      enc.encodeMap(map, false);
      let f = enc.buildFeature(null, jbon.FEATURE_VARIANT_TAGS)
      return f
    }
    function encodeFeature(json) {
      if (!json) json = '{"id":"foo","properties":{"name":"Bar"}}'
      let raw = json;
      if (typeof raw === "string") raw = Platform.fromJSON(json);
      let klass = Platform.klassFor(base.AnyObject)
      let map = Platform.proxy(raw, klass)
      let enc = new JbEncoder();
      let f = enc.buildFeatureFromMap(map)
      return f
    }
    function decodeFeature(f) {
      let dec = new JbFeatureDecoder()
      dec.mapBytes(f)
      return dec.toAnyObject()
    }
    function decodeTags(f) {
      let dec = new JbFeatureDecoder()
      dec.mapBytes(f)
      return dec.toMap()
    }
  </script>
</head>
<body>
  <p>Hello World!</p>
</body>
</html>